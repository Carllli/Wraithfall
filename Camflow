using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class camflow : MonoBehaviour
{
    public float cameraSpeed = 5.0f; // 카메라가 목표 위치로 이동하는 속도
    public GameObject player;       // 따라갈 플레이어 오브젝트
    public float yOffset = 2.0f;    // 카메라의 Y축 오프셋 (플레이어보다 위로 올림)

    // 맵 경계를 설정하는 변수
    public float minX; // 맵의 왼쪽 경계
    public float maxX; // 맵의 오른쪽 경계
    public float minY; // 맵의 아래 경계
    public float maxY; // 맵의 위 경계

    private void LateUpdate()
    {
        if (player == null)
        {
            Debug.LogError("Player 오브젝트가 설정되지 않았습니다!");
            return;
        }

        // 플레이어 위치를 기준으로 목표 위치 계산
        Vector3 targetPosition = new Vector3(
            player.transform.position.x,          // 플레이어의 X 위치
            player.transform.position.y + yOffset, // 플레이어의 Y 위치 + 오프셋
            transform.position.z                  // 카메라의 Z 위치 유지
        );

        // 현재 위치에서 목표 위치로 부드럽게 이동
        Vector3 smoothedPosition = Vector3.Lerp(transform.position, targetPosition, cameraSpeed * Time.deltaTime);

        // 카메라 위치를 맵 경계 안으로 제한
        smoothedPosition.x = Mathf.Clamp(smoothedPosition.x, minX, maxX);
        smoothedPosition.y = Mathf.Clamp(smoothedPosition.y, minY, maxY);

        // 제한된 위치로 카메라 이동
        transform.position = smoothedPosition;
    }
}
